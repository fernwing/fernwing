extends layout
mixin color-list(r,disabled,total)
  .row
    .col-sm-10
      .row
        +color-field(r, "紅色", "red", disabled)
        +color-field(r, "綠色", "green", disabled)
        +color-field(r, "水藍色", "cyan", disabled)
        +color-field(r, "紫色", "purple", disabled)
        +color-field(r, "紫紅色", "magenta", disabled)
        +color-field(r, "黑色", "black", disabled)
    if total
      +color-field(r, "總計", "total", disabled="true")

mixin color-field(r, c1, c2,disabled)
  .col-sm-2.form-group
    label= c1
    input.form-control(type="text",name=c2,value="0",ng-model=r+"."+c2,disabled=disabled)
block pre-content
  script(type="text/javascript",src="js/admin.js")
block content
  div.static-content
    .panel.panel-primary.thick(ng-controller="stock")
      .panel-heading 商品進貨數量與訂價
      .panel-body
        form(method="POST",action="/api/admin/stock")
          h4 進貨數量
          +color-list("stock.count",false,true)
          h4 訂價
          +color-list("stock.price",false,false)
          .btn.btn-primary.btn-block(ng-click="update()") 
            | 送出修改
            ldstate.inline(ng-model="state.value")
    .panel.panel-info.thick(ng-controller="sales")
      .panel-heading 銷售狀況
      .panel-body
        h4 建立中 (付款方式待確認)
        +color-list("init",true,true)
        h4 付款方式已確認
        +color-list("confirm",true,true)
        h4 付款完成
        +color-list("paid",true,true)
        h4 貨品送出
        +color-list("shipped",true,true)
    .panel.panel-warning.thick(ng-controller="order")
      .panel-heading 訂單內容
      .panel-body
        table.table.table-striped
          tr
            th 編號
            th 姓名
            th 地址
            th 電話
            th 紅
            th 綠
            th 藍
            th 紫
            th 紫紅
            th 黑
            th 狀態
            th 出貨
          tr(ng-repeat="o in order")
            td {{o.init.MerchantTradeNo}}
            td {{o.info.name}}
            td {{o.info.addr}}
            td {{o.info.phone}}
            td {{o.info.count.red}}
            td {{o.info.count.green}}
            td {{o.info.count.cyan}}
            td {{o.info.count.purple}}
            td {{o.info.count.magenta}}
            td {{o.info.count.black}}
            td {{o.state|orderState}}
            td: i.glyphicon.glyphicon-tag
  script(type="text/javascript",src="js/admin.js")

